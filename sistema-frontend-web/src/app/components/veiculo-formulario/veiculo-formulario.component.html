<mat-card class="veiculo-form-card">
  <mat-card-title class="card-title">{{ isEditMode ? 'Editar Veículo' : 'Cadastrar Novo Veículo' }}</mat-card-title>
  <mat-card-content>
    <form [formGroup]="veiculoForm" (ngSubmit)="onSubmit()">
      <div class="form-row">
        <mat-form-field appearance="outline" class="form-field-half">
          <mat-label>Marca</mat-label>
          <mat-select formControlName="marca" required>
            <mat-option value="">Selecione a Marca</mat-option>
            <mat-option value="Audi">Audi</mat-option>
            <mat-option value="BMW">BMW</mat-option>
            <mat-option value="Caoa Chery">Caoa Chery</mat-option>
            <mat-option value="Chevrolet">Chevrolet</mat-option>
            <mat-option value="Citroën">Citroën</mat-option>
            <mat-option value="Fiat">Fiat</mat-option>
            <mat-option value="Ford">Ford</mat-option>
            <mat-option value="Honda">Honda</mat-option>
            <mat-option value="Hyundai">Hyundai</mat-option>
            <mat-option value="Jeep">Jeep</mat-option>
            <mat-option value="Kia">Kia</mat-option>
            <mat-option value="Land Rover">Land Rover</mat-option>
            <mat-option value="Mercedes-Benz">Mercedes-Benz</mat-option>
            <mat-option value="Mitsubishi">Mitsubishi</mat-option>
            <mat-option value="Nissan">Nissan</mat-option>
            <mat-option value="Peugeot">Peugeot</mat-option>
            <mat-option value="Porsche">Porsche</mat-option>
            <mat-option value="Renault">Renault</mat-option>
            <mat-option value="Subaru">Subaru</mat-option>
            <mat-option value="Suzuki">Suzuki</mat-option>
            <mat-option value="Tesla">Tesla</mat-option>
            <mat-option value="Toyota">Toyota</mat-option>
            <mat-option value="Volkswagen">Volkswagen</mat-option>
            <mat-option value="Volvo">Volvo</mat-option>
            <mat-option value="Outra">Outra</mat-option>
          </mat-select>
          <mat-error *ngIf="veiculoForm.get('marca')?.hasError('required') && veiculoForm.get('marca')?.touched">
            A marca é obrigatória.
          </mat-error>
        </mat-form-field>

        <mat-form-field appearance="outline" class="form-field-half">
          <mat-label>Modelo</mat-label>
          <input matInput type="text" formControlName="modelo" required>
          <mat-error *ngIf="veiculoForm.get('modelo')?.hasError('required') && veiculoForm.get('modelo')?.touched">
            O modelo é obrigatório.
          </mat-error>
          <mat-error *ngIf="veiculoForm.get('modelo')?.hasError('minlength') && veiculoForm.get('modelo')?.touched">
            O modelo deve ter no mínimo 2 caracteres.
          </mat-error>
        </mat-form-field>
      </div>

      <div class="form-row">
        <mat-form-field appearance="outline" class="form-field-half">
          <mat-label>Ano</mat-label>
          <mat-select formControlName="ano" required>
            <mat-option value="">Selecione o Ano</mat-option>
            <mat-option *ngFor="let ano of anos" [value]="ano">{{ ano }}</mat-option>
          </mat-select>
          <mat-error *ngIf="veiculoForm.get('ano')?.hasError('required') && veiculoForm.get('ano')?.touched">
            O ano é obrigatório.
          </mat-error>
          <mat-error *ngIf="(veiculoForm.get('ano')?.hasError('min') || veiculoForm.get('ano')?.hasError('max')) && veiculoForm.get('ano')?.touched">
            Ano inválido.
          </mat-error>
        </mat-form-field>

        <mat-form-field appearance="outline" class="form-field-half">
          <mat-label>Cor</mat-label>
          <input matInput type="text" formControlName="cor" required>
          <mat-error *ngIf="veiculoForm.get('cor')?.hasError('required') && veiculoForm.get('cor')?.touched">
            A cor é obrigatória.
          </mat-error>
        </mat-form-field>
      </div>

      <div class="form-row">
        <mat-form-field appearance="outline" class="form-field-half">
          <mat-label>Preço</mat-label>
          <input matInput type="number" formControlName="preco" required>
          <mat-error *ngIf="veiculoForm.get('preco')?.hasError('required') && veiculoForm.get('preco')?.touched">
            O preço é obrigatório.
          </mat-error>
          <mat-error *ngIf="veiculoForm.get('preco')?.hasError('min') && veiculoForm.get('preco')?.touched">
            O preço deve ser um valor positivo.
          </mat-error>
        </mat-form-field>

        <mat-form-field appearance="outline" class="form-field-half">
          <mat-label>Quilometragem</mat-label>
          <input matInput type="number" formControlName="quilometragem" required>
          <mat-error *ngIf="veiculoForm.get('quilometragem')?.hasError('required') && veiculoForm.get('quilometragem')?.touched">
            A quilometragem é obrigatória.
          </mat-error>
          <mat-error *ngIf="veiculoForm.get('quilometragem')?.hasError('min') && veiculoForm.get('quilometragem')?.touched">
            A quilometragem deve ser um número positivo.
          </mat-error>
        </mat-form-field>
      </div>

      <div class="form-row">
        <mat-form-field appearance="outline" class="form-field-half">
          <mat-label>Combustível</mat-label>
          <mat-select formControlName="tipoCombustivel" required>
            <mat-option value="">Selecione o Combustível</mat-option>
            <mat-option value="Gasolina">Gasolina</mat-option>
            <mat-option value="Etanol">Etanol</mat-option>
            <mat-option value="Flex">Flex</mat-option>
            <mat-option value="Diesel">Diesel</mat-option>
            <mat-option value="Elétrico">Elétrico</mat-option>
            <mat-option value="Híbrido">Híbrido</mat-option>
          </mat-select>
          <mat-error *ngIf="veiculoForm.get('tipoCombustivel')?.hasError('required') && veiculoForm.get('tipoCombustivel')?.touched">
            O tipo de combustível é obrigatório.
          </mat-error>
        </mat-form-field>

        <mat-form-field appearance="outline" class="form-field-half">
          <mat-label>Câmbio</mat-label>
          <mat-select formControlName="cambio" required>
            <mat-option value="">Selecione o Câmbio</mat-option>
            <mat-option value="Manual">Manual</mat-option>
            <mat-option value="Automático">Automático</mat-option>
            <mat-option value="Automatizado">Automatizado</mat-option>
            <mat-option value="CVT">CVT</mat-option>
          </mat-select>
          <mat-error *ngIf="veiculoForm.get('cambio')?.hasError('required') && veiculoForm.get('cambio')?.touched">
            O câmbio é obrigatório.
          </mat-error>
        </mat-form-field>
      </div>

      <div class="form-row">
        <mat-form-field appearance="outline" class="form-field-half">
          <mat-label>Placa</mat-label>
          <input matInput type="text" formControlName="placa" required placeholder="Ex: ABC1D23">
          <mat-error *ngIf="veiculoForm.get('placa')?.hasError('required') && veiculoForm.get('placa')?.touched">
            A placa é obrigatória.
          </mat-error>
          <mat-error *ngIf="veiculoForm.get('placa')?.hasError('pattern') && veiculoForm.get('placa')?.touched">
            Formato de placa inválido (ex: ABC1D23).
          </mat-error>
        </mat-form-field>

        <mat-form-field appearance="outline" class="form-field-half">
          <mat-label>Status</mat-label>
          <mat-select formControlName="status" required>
            <mat-option value="">Selecione um status</mat-option>
            <mat-option value="DISPONIVEL">Disponível</mat-option>
            <mat-option value="VENDIDO">Vendido</mat-option>
            <mat-option value="RESERVADO">Reservado</mat-option>
            <mat-option value="MANUTENCAO">Manutenção</mat-option>
          </mat-select>
          <mat-error *ngIf="veiculoForm.get('status')?.hasError('required') && veiculoForm.get('status')?.touched">
            O status é obrigatório.
          </mat-error>
        </mat-form-field>
      </div>

      <mat-form-field appearance="outline" class="form-field-full">
        <mat-label>Descrição</mat-label>
        <textarea matInput formControlName="descricao" rows="3"></textarea>
      </mat-form-field>

      <mat-card-actions class="form-actions">
        <button mat-raised-button color="primary" type="submit" [disabled]="veiculoForm.invalid">
          <mat-icon>save</mat-icon> Salvar Veículo
        </button>
        <button mat-button type="button" (click)="router.navigate(['/veiculos'])">
          <mat-icon>cancel</mat-icon> Cancelar
        </button>
      </mat-card-actions>
    </form>
  </mat-card-content>
</mat-card>